class TexturalTriangleCanvas{constructor(t){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.CANVAS_WIDTH=this.canvas.width,this.CANVAS_HEIGHT=this.canvas.height,this.PADDING=.1,this.LINE_GAP=(this.CANVAS_WIDTH+this.CANVAS_HEIGHT)/2*.08,this.canvas.style.width=`${this.CANVAS_WIDTH}px`,this.canvas.style.height=`${this.CANVAS_HEIGHT}px`,this.siltColor="red",this.sandColor="orange",this.clayColor="blue",this.textColor="black",this.backgroundColor="white",this.triangleColor="black",this.dottedLineColor="gray",this.setLanguage()}draw(){return this._drawBackground(this),this._drawPercentageLines(this),this._drawDividingLines(this),this._drawTexturalTextClasses(this),this._drawBackgroundOutside(this),this._drawPercentageTextValues(this),this._drawPercentText(this),this}drawWithValues(t,e,A){if(isNaN(t)||isNaN(e)||isNaN(A))throw new Error("Invalid parameters (Need to be numbers)");if(this.siltPercent=parseFloat(t)/10,this.sandPercent=parseFloat(e)/10,this.clayPercent=parseFloat(A)/10,10*this.siltPercent+10*this.sandPercent+10*this.clayPercent!=100)throw new Error("Percentages must add up to 100");this._drawBackground(this),this._drawPercentageLines(this),this._drawDividingLines(this),this._drawTexturalTextClasses(this),this._drawDottedLines(this),this._drawPercentageMeetingPoint(this),this._drawBackgroundOutside(this),this._drawPercentageTextValues(this),this._drawPercentText(this)}refresh(){return this.draw()}getLanguages(){return{en:{veryClayeyText:"Heavy Clay",clayText:"Clay",sandyClayText:"Sandy Clay",siltyClayText:"Silty Clay",sandyClayLoamText:"Sandy Clay Loam",clayLoamText:"Clay Loam",siltyClayLoamText:"Silty Clay Loam",sandText:"Sand",loamySandText:"Loamy Sand",sandyLoamText:"Sandy Loam",loamText:"Loam",siltLoamText:"Silt Loam",siltText:"Silt",percentClayText:"% Clay",percentSiltText:"% Silt",percentSandText:"% Sand"},"pt-br":{veryClayeyText:"Muito Argiloso",clayText:"Argila",sandyClayText:"Argilo Arenoso",siltyClayText:"Argilo Siltoso",sandyClayLoamText:"Franco Argilo Arenoso",clayLoamText:"Franco Argiloso",siltyClayLoamText:"Franco Argilo Siltoso",sandText:"Areia",loamySandText:"Areia Franca",sandyLoamText:"Franco Arenoso",loamText:"Franco",siltLoamText:"Franco Siltoso",siltText:"Silte",percentClayText:"% Argila",percentSiltText:"% Silte",percentSandText:"% Areia"},sp:{veryClayeyText:"Muy Argiloso",clayText:"Argila",sandyClayText:"Argila Arena",siltyClayText:"Argila Arena Silicada",sandyClayLoamText:"Argila Arena Lomosa",clayLoamText:"Argila Lomosa",siltyClayLoamText:"Argila Silicada Lomosa",sandText:"Arena",loamySandText:"Arena Lomosa",sandyLoamText:"Arena Lomosa",loamText:"Lomosa",siltLoamText:"Silicada Lomosa",siltText:"Silicada",percentClayText:"% Argila",percentSiltText:"% Silicada",percentSandText:"% Arena"}}}setLanguage(t="en",e=this.getLanguages()){this.veryClayeyText=e[t].veryClayeyText,this.clayText=e[t].clayText,this.sandyClayText=e[t].sandyClayText,this.siltyClayText=e[t].siltyClayText,this.sandyClayLoamText=e[t].sandyClayLoamText,this.clayLoamText=e[t].clayLoamText,this.siltyClayLoamText=e[t].siltyClayLoamText,this.sandText=e[t].sandText,this.loamySandText=e[t].loamySandText,this.sandyLoamText=e[t].sandyLoamText,this.loamText=e[t].loamText,this.siltLoamText=e[t].siltLoamText,this.siltText=e[t].siltText,this.percentClayText=e[t].percentClayText,this.percentSiltText=e[t].percentSiltText,this.percentSandText=e[t].percentSandText}_drawTextLink(t){const e="Developed with ðŸ–¤ by github.com/netosep";t.ctx.font=.014*t.CANVAS_WIDTH+"px Arial",t.ctx.textAlign="end",t.ctx.fillStyle="gray",t.ctx.fillText(e,t.CANVAS_WIDTH-150*t.PADDING,t.CANVAS_HEIGHT-150*t.PADDING);let A={x:t.CANVAS_WIDTH,y:t.CANVAS_HEIGHT,width:t.ctx.measureText(e).width,height:.015*t.CANVAS_WIDTH};function l(e,A){return e.offsetX>=A.x-(A.width+150*t.PADDING)&&e.offsetX<=A.x-150*t.PADDING&&e.offsetY<=A.y-A.height&&e.offsetY>=A.y-250*t.PADDING}t.canvas.addEventListener("mousemove",(function(e){l(e,A)?t.canvas.style.cursor="pointer":t.canvas.style.cursor="default"})),t.canvas.addEventListener("click",(function(t){l(t,A)&&window.open("https://github.com/netosep/textural-triangle-canvas","_blank")}))}_drawBackground(t){t.ctx.fillStyle=t.backgroundColor,t.ctx.beginPath(),t.ctx.moveTo(0,0),t.ctx.lineTo(t.CANVAS_WIDTH,0),t.ctx.lineTo(t.CANVAS_WIDTH,t.CANVAS_HEIGHT),t.ctx.lineTo(0,t.CANVAS_HEIGHT),t.ctx.closePath(),t.ctx.fill()}_drawPercentageLines(t){t.ctx.lineWidth=1,t.ctx.setLineDash([0,0]);for(let e=t.CANVAS_HEIGHT*t.PADDING;e<=t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING;e+=t.LINE_GAP)t.ctx.strokeStyle=t.clayColor,t.ctx.beginPath(),t.ctx.moveTo(t.CANVAS_WIDTH*t.PADDING,e),t.ctx.lineTo(t.CANVAS_WIDTH-t.CANVAS_WIDTH*t.PADDING,e),t.ctx.stroke();let e=0;for(let A=t.CANVAS_WIDTH*t.PADDING;A<t.CANVAS_WIDTH-t.CANVAS_WIDTH*t.PADDING;A+=t.LINE_GAP)t.ctx.strokeStyle=t.sandColor,t.ctx.beginPath(),t.ctx.moveTo(t.CANVAS_WIDTH-A,t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2-e,t.CANVAS_HEIGHT*t.PADDING),t.ctx.stroke(),e+=t.LINE_GAP;let A=0;for(let e=t.CANVAS_WIDTH*t.PADDING;e<t.CANVAS_WIDTH-t.CANVAS_WIDTH*t.PADDING;e+=t.LINE_GAP)t.ctx.strokeStyle=t.siltColor,t.ctx.beginPath(),t.ctx.moveTo(t.PADDING+e,t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2+A,t.CANVAS_HEIGHT*t.PADDING),t.ctx.stroke(),A+=t.LINE_GAP}_drawDividingLines(t){t.ctx.lineWidth=.003*t.CANVAS_WIDTH,t.ctx.strokeStyle=t.triangleColor,t.ctx.beginPath(),t.ctx.moveTo(.34*t.CANVAS_WIDTH,.42*t.CANVAS_HEIGHT),t.ctx.lineTo(t.CANVAS_WIDTH-.34*t.CANVAS_WIDTH,.42*t.CANVAS_HEIGHT),t.ctx.lineTo(.58*t.CANVAS_WIDTH,.58*t.CANVAS_HEIGHT),t.ctx.lineTo(.74*t.CANVAS_WIDTH,.58*t.CANVAS_HEIGHT),t.ctx.lineTo(.79*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.63*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.58*t.CANVAS_WIDTH,.58*t.CANVAS_HEIGHT),t.ctx.lineTo(.38*t.CANVAS_WIDTH,.58*t.CANVAS_HEIGHT),t.ctx.lineTo(.32*t.CANVAS_WIDTH,.46*t.CANVAS_HEIGHT),t.ctx.lineTo(.24*t.CANVAS_WIDTH,.62*t.CANVAS_HEIGHT),t.ctx.lineTo(.4*t.CANVAS_WIDTH,.62*t.CANVAS_HEIGHT),t.ctx.lineTo(.38*t.CANVAS_WIDTH,.58*t.CANVAS_HEIGHT),t.ctx.lineTo(.43*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.79*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.61*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.5*t.CANVAS_WIDTH,.9*t.CANVAS_HEIGHT),t.ctx.lineTo(.34*t.CANVAS_WIDTH,.9*t.CANVAS_HEIGHT),t.ctx.lineTo(.16*t.CANVAS_WIDTH,.78*t.CANVAS_HEIGHT),t.ctx.lineTo(.14*t.CANVAS_WIDTH,.82*t.CANVAS_HEIGHT),t.ctx.lineTo(.23*t.CANVAS_WIDTH,.9*t.CANVAS_HEIGHT),t.ctx.lineTo(.5*t.CANVAS_WIDTH,.9*t.CANVAS_HEIGHT),t.ctx.lineTo(.52*t.CANVAS_WIDTH,.86*t.CANVAS_HEIGHT),t.ctx.lineTo(.46*t.CANVAS_WIDTH,.86*t.CANVAS_HEIGHT),t.ctx.lineTo(.4*t.CANVAS_WIDTH,.74*t.CANVAS_HEIGHT),t.ctx.lineTo(.43*t.CANVAS_WIDTH,.68*t.CANVAS_HEIGHT),t.ctx.lineTo(.4*t.CANVAS_WIDTH,.74*t.CANVAS_HEIGHT),t.ctx.lineTo(.18*t.CANVAS_WIDTH,.74*t.CANVAS_HEIGHT),t.ctx.moveTo(.74*t.CANVAS_WIDTH,.9*t.CANVAS_HEIGHT),t.ctx.lineTo(.78*t.CANVAS_WIDTH,.82*t.CANVAS_HEIGHT),t.ctx.lineTo(.86*t.CANVAS_WIDTH,.82*t.CANVAS_HEIGHT),t.ctx.stroke()}_drawTexturalTextClasses(t){t.ctx.font=`bold ${.023*t.CANVAS_WIDTH}px Arial`,t.ctx.fillStyle=t.textColor,t.ctx.textAlign="center",t.ctx.fillText(t.veryClayeyText.split(" ")[0],t.CANVAS_WIDTH/2,.31*t.CANVAS_HEIGHT),t.ctx.fillText(t.veryClayeyText.split(" ")[1],t.CANVAS_WIDTH/2,.335*t.CANVAS_HEIGHT),t.ctx.fillText(t.clayText,t.CANVAS_WIDTH/2,.51*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandyClayText.split(" ")[0],.32*t.CANVAS_WIDTH,.57*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandyClayText.split(" ")[1],.32*t.CANVAS_WIDTH,.595*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltyClayText.split(" ")[0],.66*t.CANVAS_WIDTH,.53*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltyClayText.split(" ")[1],.66*t.CANVAS_WIDTH,.555*t.CANVAS_HEIGHT),t.ctx.fillText(t.clayLoamText,.51*t.CANVAS_WIDTH,.64*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltyClayLoamText.split(" ")[0],.68*t.CANVAS_WIDTH,.62*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltyClayLoamText.split(" ")[1],.68*t.CANVAS_WIDTH,.645*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltyClayLoamText.split(" ")[2],.68*t.CANVAS_WIDTH,.67*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandyClayLoamText.split(" ")[0],.31*t.CANVAS_WIDTH,.67*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandyClayLoamText.split(" ")[1],.31*t.CANVAS_WIDTH,.695*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandyClayLoamText.split(" ")[2],.31*t.CANVAS_WIDTH,.72*t.CANVAS_HEIGHT),t.ctx.fillText(t.sandText,.155*t.CANVAS_WIDTH,.88*t.CANVAS_HEIGHT),t.ctx.save(),t.ctx.translate(.21*t.CANVAS_WIDTH,.85*t.CANVAS_HEIGHT),t.ctx.rotate(Math.PI/5),t.ctx.fillText(t.loamySandText,0,0),t.ctx.restore(),t.ctx.fillText(t.sandyLoamText,.32*t.CANVAS_WIDTH,.815*t.CANVAS_HEIGHT),t.ctx.fillText(t.loamText,.5*t.CANVAS_WIDTH,.78*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltLoamText,.68*t.CANVAS_WIDTH,.8*t.CANVAS_HEIGHT),t.ctx.fillText(t.siltText,.815*t.CANVAS_WIDTH,.87*t.CANVAS_HEIGHT)}_drawBackgroundOutside(t){t.ctx.lineWidth=.01*t.CANVAS_WIDTH,t.ctx.strokeStyle=t.triangleColor,t.ctx.fillStyle=t.backgroundColor,t.ctx.setLineDash([0,0]),t.ctx.beginPath(),t.ctx.moveTo(0,0),t.ctx.lineTo(t.CANVAS_WIDTH/2,0),t.ctx.lineTo(t.CANVAS_WIDTH/2,t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH*t.PADDING,t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH-t.CANVAS_WIDTH*t.PADDING,t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2,t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2,0),t.ctx.lineTo(t.CANVAS_WIDTH,0),t.ctx.lineTo(t.CANVAS_WIDTH,t.CANVAS_HEIGHT),t.ctx.lineTo(0,t.CANVAS_HEIGHT),t.ctx.closePath(),t.ctx.stroke(),t.ctx.fill(),this._drawTextLink(this)}_drawPercentageTextValues(t){t.ctx.font=`bold ${.025*t.CANVAS_WIDTH}px Arial`;let e=0;for(let A=0;A<=100;A+=10)t.ctx.fillStyle=t.clayColor,t.ctx.textAlign="right",t.ctx.fillText(A,t.CANVAS_WIDTH*t.PADDING-10+e/2,t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING-e),e+=t.LINE_GAP;let A=0;for(let e=0;e<=100;e+=10)t.ctx.fillStyle=t.siltColor,t.ctx.textAlign="left",t.ctx.fillText(e,t.CANVAS_WIDTH/2+10+A/2,t.CANVAS_HEIGHT*t.PADDING+A),A+=t.LINE_GAP;let l=0;for(let e=0;e<=100;e+=10)t.ctx.font=`bold ${.025*t.CANVAS_WIDTH}px Arial`,t.ctx.fillStyle=t.sandColor,t.ctx.textAlign="center",t.ctx.fillText(e,t.CANVAS_WIDTH-(t.CANVAS_WIDTH*t.PADDING+l),t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*(t.PADDING/1.5)),l+=t.LINE_GAP}_drawPercentText(t){t.ctx.font=`bold ${t.CANVAS_WIDTH/25}px Arial`,t.ctx.textAlign="center",t.ctx.fillStyle=t.clayColor,t.ctx.save(),t.ctx.translate(.22*t.CANVAS_WIDTH,t.CANVAS_HEIGHT/2),t.ctx.rotate(-Math.PI/3),t.ctx.fillText(t.percentClayText.toUpperCase(),0,0),t.ctx.restore(),t.ctx.fillStyle=t.siltColor,t.ctx.save(),t.ctx.translate(.78*t.CANVAS_WIDTH,t.CANVAS_HEIGHT/2),t.ctx.rotate(Math.PI/3),t.ctx.fillText(t.percentSiltText.toUpperCase(),0,0),t.ctx.restore(),t.ctx.fillStyle=t.sandColor,t.ctx.save(),t.ctx.fillText(t.percentSandText.toUpperCase(),t.CANVAS_WIDTH/2.1,.98*t.CANVAS_HEIGHT),t.ctx.restore()}_drawDottedLines(t){t.ctx.lineWidth=.003*t.CANVAS_WIDTH,t.ctx.strokeStyle=t.dottedLineColor,t.ctx.setLineDash([5,3]),t.ctx.beginPath(),t.ctx.moveTo(t.CANVAS_WIDTH-(t.CANVAS_WIDTH*t.PADDING+t.LINE_GAP*t.sandPercent),t.CANVAS_HEIGHT-t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2-(t.sandPercent-t.siltPercent)*t.LINE_GAP/2,t.CANVAS_HEIGHT-(t.CANVAS_HEIGHT*t.PADDING+t.LINE_GAP*t.clayPercent)),t.ctx.moveTo(t.CANVAS_WIDTH/2+t.LINE_GAP*t.siltPercent,t.CANVAS_HEIGHT*t.PADDING),t.ctx.lineTo(t.CANVAS_WIDTH/2-(t.sandPercent-t.siltPercent)*t.LINE_GAP/2,t.CANVAS_HEIGHT-(t.CANVAS_HEIGHT*t.PADDING+t.LINE_GAP*t.clayPercent)),t.ctx.moveTo(t.CANVAS_WIDTH*t.PADDING,t.CANVAS_HEIGHT-(t.CANVAS_HEIGHT*t.PADDING+t.LINE_GAP*t.clayPercent)),t.ctx.lineTo(t.CANVAS_WIDTH/2-(t.sandPercent-t.siltPercent)*t.LINE_GAP/2,t.CANVAS_HEIGHT-(t.CANVAS_HEIGHT*t.PADDING+t.LINE_GAP*t.clayPercent)),t.ctx.stroke()}_drawPercentageMeetingPoint(t){t.ctx.fillStyle=t.dottedLineColor,t.ctx.beginPath();let e=t.CANVAS_WIDTH/2-(t.sandPercent-t.siltPercent)*t.LINE_GAP/2,A=t.CANVAS_HEIGHT-(t.CANVAS_HEIGHT*t.PADDING+t.LINE_GAP*t.clayPercent);t.ctx.arc(e,A,.005*t.CANVAS_WIDTH,0,2*Math.PI),t.ctx.fill()}}